<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Randomly downsample by identity — Random_Cells_Downsample • scCustomize</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Randomly downsample by identity — Random_Cells_Downsample"><meta property="og:description" content="Get a randomly downsampled set of cell barcodes with even numbers of cells for each identity class.
Can return either as a list (1 entry per identity class) or vector of barcodes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scCustomize</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Getting Started</a>
</li>
<li>
  <a href="../articles/Installation.html">Install</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Plotting Vignettes</li>
    <li>
      <a href="../articles/Gene_Expression_Plotting.html">Plotting #1: General Analysis Plots</a>
    </li>
    <li>
      <a href="../articles/QC_Plots.html">Plotting #2: QC Plots &amp; Analysis</a>
    </li>
    <li>
      <a href="../articles/Sequencing_QC_Plots.html">Plotting #3: Sequencing QC Plots/Analysis</a>
    </li>
    <li>
      <a href="../articles/Iterative_Plotting.html">Plotting #4: Iterative Plotting Functions</a>
    </li>
    <li>
      <a href="../articles/Spatial_Plotting.html">Plotting #5: Spatial Plotting Functions</a>
    </li>
    <li>
      <a href="../articles/Color_Palettes.html">Customized Color Palettes &amp; Themes</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Helpers &amp; Utilities</li>
    <li>
      <a href="../articles/Helpers_and_Utilities.html">General Helpers &amp; Utilities</a>
    </li>
    <li>
      <a href="../articles/Object_QC_Functions.html">Object QC Functions</a>
    </li>
    <li>
      <a href="../articles/Read_and_Write_Functions.html">Read &amp; Write Data Functions</a>
    </li>
    <li>
      <a href="../articles/Object_Conversion.html">Object/Assay Format Conversion</a>
    </li>
    <li>
      <a href="../articles/Markers_and_Cluster_Annotation.html">Marker Identification &amp; Cluster Annotation Helpers</a>
    </li>
    <li>
      <a href="../articles/Statistics.html">Statistics Functions</a>
    </li>
    <li>
      <a href="../articles/Update_Gene_Symbols.html">Updating Gene Symbols</a>
    </li>
    <li>
      <a href="../articles/Misc_Functions.html">Misc Functions</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Other Package Interactivity/Functions</li>
    <li>
      <a href="../articles/LIGER_Functions.html">LIGER Plotting &amp; Functionality</a>
    </li>
    <li>
      <a href="../articles/Cell_Bender_Functions.html">Cell Bender Functionality &amp; Plotting</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News/Changelog</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/FAQ.html">FAQ</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/samuel-marsh/scCustomize/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Randomly downsample by identity</h1>
    <small class="dont-index">Source: <a href="https://github.com/samuel-marsh/scCustomize/blob/HEAD/R/Object_Utilities.R" class="external-link"><code>R/Object_Utilities.R</code></a></small>
    <div class="hidden name"><code>Random_Cells_Downsample.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Get a randomly downsampled set of cell barcodes with even numbers of cells for each identity class.
Can return either as a list (1 entry per identity class) or vector of barcodes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Random_Cells_Downsample</span><span class="op">(</span></span>
<span>  <span class="va">seurat_object</span>,</span>
<span>  <span class="va">num_cells</span>,</span>
<span>  group.by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return_list <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  allow_lower <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>seurat_object</dt>
<dd><p>Seurat object</p></dd>


<dt>num_cells</dt>
<dd><p>number of cells per ident to use in down-sampling.  This value must be less than or
equal to the size of ident with fewest cells.  Alternatively, can set to "min" which will
use the maximum number of barcodes based on size of smallest group.</p></dd>


<dt>group.by</dt>
<dd><p>The ident to use to group cells.  Default is NULL which use current active.ident.  .</p></dd>


<dt>return_list</dt>
<dd><p>logical, whether or not to return the results as list instead of vector, default is
FALSE.</p></dd>


<dt>allow_lower</dt>
<dd><p>logical, if number of cells in identity is lower than <code>num_cells</code> keep the
maximum number of cells, default is FALSE.  If FALSE will report error message if <code>num_cells</code> is
too high, if TRUE will subset cells with more than <code>num_cells</code> to that value and those with less
than <code>num_cells</code> will not be downsampled.</p></dd>


<dt>seed</dt>
<dd><p>random seed to use for downsampling.  Default is 123.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>either a vector or list of cell barcodes</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://satijalab.org/seurat" class="external-link">Seurat</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return vector of barcodes</span></span></span>
<span class="r-in"><span><span class="va">random_cells</span> <span class="op">&lt;-</span> <span class="fu">Random_Cells_Downsample</span><span class="op">(</span>seurat_object <span class="op">=</span> <span class="va">pbmc_small</span>, num_cells <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">random_cells</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "GTCATACTTCGCCT" "GCGCATCTTGCTCC" "TACTCTGAATCGAC" "GAACCTGATGAACC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "AATGTTGACAGTCA" "GGCATATGCTTATC"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return list</span></span></span>
<span class="r-in"><span><span class="va">random_cells_list</span> <span class="op">&lt;-</span> <span class="fu">Random_Cells_Downsample</span><span class="op">(</span>seurat_object <span class="op">=</span> <span class="va">pbmc_small</span>, return_list <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>num_cells <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">random_cells_list</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "GTCATACTTCGCCT" "GCGCATCTTGCTCC" "TACTCTGAATCGAC" "GAACCTGATGAACC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "AATGTTGACAGTCA" "GGCATATGCTTATC" "CTTCATGACCGAAT" "CTAAACCTCTGACA"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "AGTCAGACTGCACA" "TAGGGACTGAACTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "AAGCGACTTTGACG" "ATTGTAGATTCCCG" "ATTACCTGCCTTAT" "ATACCACTCTAAGC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "TCCACTCTGAGCTT" "GCGCACGACTTTAC" "CCATCCGATTCGCC" "AAATTCGAATCACG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "CATCAGGATGCACA" "ACGTGATGCCATGA"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "GCGTAAACACGGTT" "CATGAGACACGGGA" "TTGCATTGAGCTAC" "AGGTCATGAGTGTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "GATAGAGAAGGGTG" "GTAAGCACTCATTC" "TACGCCACTCCGAA" "GCTCCATGAGAAGT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "TACATCACGCTAAC" "CATATAGACTAAGC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return max total number of cells (setting `num_cells = "min`)</span></span></span>
<span class="r-in"><span><span class="va">random_cells_max</span> <span class="op">&lt;-</span> <span class="fu">Random_Cells_Downsample</span><span class="op">(</span>seurat_object <span class="op">=</span> <span class="va">pbmc_small</span>, num_cells <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The number of cells was set to <span style="color: #0000BB;">"min"</span>, returning <span style="color: #00BB00;">19</span> cells per identity class</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> (equal to size of smallest identity class(es): <span style="color: #0000BB;">"2"</span>).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Total of <span style="color: #00BB00;">57</span> cells across whole object.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Samuel Marsh.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

